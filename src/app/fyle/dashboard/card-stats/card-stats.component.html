<div *ngIf="cardTransactionsAndDetails$ | async as cardTransactionsAndDetails" class="stats--ccc-cards-section">
  <ng-container *ngIf="cardTransactionsAndDetails.length > 0">
    <div class="stats--header stats--ccc-stats-header">CARD SPEND</div>

    <ng-container *ngIf="cardTransactionsAndDetails.length > 1; else singleCard">
      <app-spent-cards
        [spentCards]="cardTransactionsAndDetails"
        [homeCurrency]="homeCurrency$"
        [currencySymbol]="currencySymbol$"
      ></app-spent-cards>
    </ng-container>

    <ng-template #singleCard class="stats--single-ccc">
      <app-card-detail
        [cardDetail]="cardTransactionsAndDetails[0]"
        [homeCurrency]="homeCurrency$"
        [currencySymbol]="currencySymbol$"
      >
      </app-card-detail>
    </ng-template>
  </ng-container>

  <!-- Show add card empty state when the user doesn't have any cards, and has yodlee / personal cards enabled to allow adding cards -->
  <ng-container *ngIf="isVisaRTFEnabled$ | async as isVisaRTFEnabled">
    <ng-container *ngIf="isMastercardRTFEnabled$ | async as isMastercardRTFEnabled">
      <ng-container *ngIf="cardTransactionsAndDetails.length === 0 && (isVisaRTFEnabled || isMastercardRTFEnabled)">
        <div class="stats--header stats--ccc-stats-header">CARD SPEND</div>
        <div class="stats--ccc-zero-state">
          <app-add-card [showZeroStateMessage]="true"></app-add-card>
        </div>
      </ng-container>
    </ng-container>
  </ng-container>
</div>
